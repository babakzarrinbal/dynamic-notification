(function(e){function t(t){for(var n,a,o=t[0],l=t[1],c=t[2],_=0,p=[];_<o.length;_++)a=o[_],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&p.push(s[a][0]),s[a]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(p.length)p.shift()();return i.push.apply(i,c||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,o=1;o<r.length;o++){var l=r[o];0!==s[l]&&(n=!1)}n&&(i.splice(t--,1),e=a(a.s=r[0]))}return e}var n={},s={app:0},i=[];function a(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=n,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/dynamic-notification/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},1:function(e,t){},1449:function(e,t,r){"use strict";r.r(t);r("c5f6"),r("96cf");var n=r("1da1");window.delay=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){return setTimeout(e,t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Number.prototype.round=function(e){var t=window.Math.pow(10,e);return window.Math.round(this*t)/t};var s=r("b9b9");Date.prototype.format=function(e){return s(this,e)}},2938:function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("f751"),r("097d");var n,s={host:window.location.origin,socket:"/socket",mock:!0};if(s.mock)n={emit:function(){},on:function(){}};else{var i=r("8055");n=i.connect(s.host+s.socket,{upgrade:!0,transports:["websocket"],reconnect:!0})}var a=n,o=(r("7514"),r("96cf"),r("1da1")),l=[{url:"/api/db-cache",response:{data:[],error:null}},{regex:/\/api\/template\/.*?\/[^/]*/,method:"delete",response:{error:null,data:"success"}},{url:"/api/template",method:"post",response:{error:null,data:"sucess"}},{url:"/api/template-process",response:{errors:[],error:[],result:"",localcheck:!0}},{url:"/api/email",response:{error:null,data:"sucess"}}],c=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,n,s=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},n=l.find((function(e){if(e.method&&((!r.method||"get"==r.method.toLowerCase())&&"get"!=e.method.toLowerCase()||e.method!=r.method))return!1;if(e.regex){if((e.regex.exec(t)||[])[0]!=t)return!1}else if(e.url&&t.toLowerCase()!=e.url.toLowerCase())return!1;return!0}))||{},e.abrupt("return",{json:function(){return n.response},text:function(){return"string"!=n.response?JSON.stringify(n.response):n.response}});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(e){for(var t,r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return(t=window).fetch.apply(t,[s.host+e].concat(n))},_=s.mock?c:u,p=(r("4413"),r("ab8b"),r("87b8"),r("9180"),r("2b0e")),d=r("5886"),m=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{widht:"100vw",height:"100%"},attrs:{id:"app"},on:{drop:function(t){return e.createNewJson(t.dataTransfer.files)}}},[r("Header",{staticStyle:{height:"45px"}}),r("transition",{attrs:{name:"fade"}},[r("router-view",{staticClass:"body"})],1)],1)},f=[],h=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"header d-flex border-bottom border-secondary pb-3 pt-1 pl-3 clickable bg-dark text-light"},[r("router-link",{staticClass:"p-2 d-flex justify-content-center align-items-center border-right border-primary ",attrs:{tag:"div",to:"/"}},[e._v("templates")]),r("router-link",{staticClass:"p-2 d-flex justify-content-center align-items-center border-right border-primary ",attrs:{tag:"div",to:"/notification"}},[e._v("Notifications")]),r("router-link",{staticClass:"p-2 d-flex justify-content-center align-items-center border-right border-primary ",attrs:{tag:"div",to:"/logs"}},[e._v("logs")]),r("router-link",{staticClass:"p-2 d-flex justify-content-center align-items-center ",attrs:{tag:"div",to:"/help"}},[e._v("help?")])],1)},v=[],g={},b=g,x=(r("c6d3"),r("2877")),w=Object(x["a"])(b,h,v,!1,null,"021b8adc",null),y=w.exports,E={data:function(){return{expandSettings:!1}},components:{Header:y},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.socket.on("log",(function(e){t.$root.logList.push(e),(t.$root.logList||[]).length>200&&t.$root.logList.shift()})),this.socket.on("db-cache updated",(function(e){t.$root.cache=e})),this.fetch("/api/db-cache").then((function(e){return e.json()})).then((function(e){return t.$root.cache=e.data||[]}));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),watch:{},computed:{}},C=E,D=(r("a389"),Object(x["a"])(C,m,f,!1,null,"4b5dd5b2",null)),O=D.exports,P=r("8c4f"),k=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"d-flex pb-2"},[r("div",{staticClass:"sidebar bg-info h-100 border-right px-2 pt-0 flex-shrink-0"},[r("div",{staticClass:"pt-1 d-flex mode border-bottom border-dark mb-3"},[r("div",{staticClass:"mod flex-grow-1 p-1 clickable border-right border-dark",class:{active:"edit"==e.mode},on:{click:function(t){e.mode="edit"}}},[e._v("Edit")]),r("div",{staticClass:"mod flex-grow-1 p-1 clickable",class:{active:"test"==e.mode},on:{click:function(t){e.mode="test"}}},[e._v("Test")])]),r("ul",{staticClass:"list-group w-100 overflow-auto"},[r("li",{staticClass:"clickable btn-success btn list-group-item-info rounded bg-success text-center list-group-item-action text-light",on:{click:e.createTemp}},[e._v("+ new")]),e._l(e.temps,(function(t,n){return r("li",{key:n,staticClass:"clickable list-group-item-info rounded my-1 list-group-item list-group-item-action text-left justify-content-between d-flex",class:{active:e.selectedtemp==n},on:{click:function(t){return e.selectTemp(n)}}},[r("span",[e._v(e._s(t.tid))]),r("span",[e._v(e._s(t.tlang))])])}))],2)]),null!=e.selectedtemp&&"edit"==e.mode?r("div",{staticClass:"p-2 pt-4 editcontent h-100 flex-grow-1 bg-light rounded overflow-auto d-flex flex-column position-relative"},[r("div",{staticClass:"btn btn-danger position-absolute",staticStyle:{top:"10px",right:"10px"},on:{click:function(t){return e.deleteTemp()}}},[e._v("Delete")]),r("h4",{staticClass:"title bg-light text-primary pl-4 fort-weight-bold m-0 text-left"},[e._v("Variables")]),r("div",{staticClass:"varlist mb-2 mt-0 border rounded d-flex flex-wrap overflow-auto position-relative",staticStyle:{"min-height":"45px","max-height":"200px"}},[e.temps[e.selectedtemp].variables.length?e._e():r("div",{staticClass:"novar d-flex justify-content-center align-items-center text-secondary w-100"},[e._v("No Variable found in this template")]),e._l(e.temps[e.selectedtemp].variables,(function(t,n){return r("div",{key:n,staticClass:"var m-1 border px-1 rounded text-light btn btn-secondary position-relative",staticStyle:{height:"32px",overflow:"visible"},on:{click:function(r){return e.gotovar(t)}}},[e._v("\n        "+e._s(t.text)+"\n        "),t.index.length>1?r("span",{staticClass:"position-absolute bg-info text-light d-flex small justify-content-center align-items-center",staticStyle:{"border-radius":"50%",bottom:"-5px",right:"-5px",height:"15px",width:"15px"}},[e._v(e._s(t.index.length))]):e._e()])}))],2),r("div",{staticClass:"editor w-100 flex-grow-1 position-relative mt-4"},[r("h4",{staticClass:"title position-absolute bg-light text-primary px-2 fort-weight-bold",staticStyle:{top:"-20px",left:"20px"}},[e._v("Template")]),r("div",{staticClass:"actions position-absolute",staticStyle:{right:"5px",top:"5px"}},[e.temps[e.selectedtemp].editable?r("div",{staticClass:"edit d-flex flex-column"},[r("img",{staticClass:"imgclick mb-3",attrs:{src:"/img/icon/accept.svg",width:"30px",height:"30px",alt:""},on:{click:function(t){return e.saveEdit()}}}),r("img",{staticClass:"imgclick",attrs:{src:"/img/icon/cancel.svg",width:"30px",height:"30px",alt:""},on:{click:function(t){return e.cancelEdit()}}})]):r("div",{staticClass:"edit"},[r("img",{staticClass:"imgclick",attrs:{src:"/img/icon/edit-text.svg",width:"30px",height:"30px",alt:""},on:{click:function(t){return e.edit()}}})])]),r("div",{staticClass:"custom-control custom-switch actions position-absolute",staticStyle:{top:"-25px",right:"20px"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.textDirection,expression:"textDirection"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"customSwitch1"},domProps:{checked:Array.isArray(e.textDirection)?e._i(e.textDirection,null)>-1:e.textDirection},on:{change:function(t){var r=e.textDirection,n=t.target,s=!!n.checked;if(Array.isArray(r)){var i=null,a=e._i(r,i);n.checked?a<0&&(e.textDirection=r.concat([i])):a>-1&&(e.textDirection=r.slice(0,a).concat(r.slice(a+1)))}else e.textDirection=s}}}),r("label",{staticClass:"custom-control-label clickable",attrs:{for:"customSwitch1"}},[e._v("RTL")])]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.currtmp,expression:"currtmp"}],ref:"textarea",staticClass:"w-100 h-100 px-2 pb-1 pt-3 rounded pr-5",class:{disabled:!e.temps[e.selectedtemp].editable},staticStyle:{resize:"none"},style:e.textDirection?"direction:rtl;":"",attrs:{readonly:!e.temps[e.selectedtemp].editable},domProps:{value:e.currtmp},on:{keyup:function(t){return e.tempChange(e.temps[e.selectedtemp])},input:function(t){t.target.composing||(e.currtmp=t.target.value)}}})])]):e._e(),null!=e.selectedtemp&&"test"==e.mode?r("div",{staticClass:"p-2 pt-4 testcontent h-100 flex-grow-1 bg-light rounded overflow-auto d-flex flex-column position-relative"},[r("div",{staticClass:"btn btn-success position-absolute",staticStyle:{top:"10px",right:"10px"},on:{click:function(t){return e.runTemp()}}},[e._v("Run")]),r("h4",{staticClass:"title bg-light text-primary pl-4 fort-weight-bold m-0 text-left"},[e._v("Variables")]),r("div",{staticClass:"varlist mb-2 mt-0 border rounded d-flex flex-wrap overflow-auto position-relative"},[e.temps[e.selectedtemp].variables.length?e._e():r("div",{staticClass:"novar d-flex justify-content-center align-items-center text-secondary w-100"},[e._v("No Variable found in this template")]),e._l(e.temps[e.selectedtemp].variables,(function(t,n){return r("div",{key:n,staticClass:"input-group var m-1 border px-1 rounded text-light position-relative"},[r("div",{staticClass:"input-group-prepend"},[r("span",{staticClass:"input-group-text",attrs:{id:"basic-addon1"}},[e._v(e._s(t.text))])]),"checkbox"===(t.type||"text")?r("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"v.value"}],staticClass:"form-control",attrs:{placeholder:"text"==t.type?"String":"Number",type:"checkbox"},domProps:{checked:Array.isArray(t.value)?e._i(t.value,null)>-1:t.value},on:{change:function(r){var n=t.value,s=r.target,i=!!s.checked;if(Array.isArray(n)){var a=null,o=e._i(n,a);s.checked?o<0&&e.$set(t,"value",n.concat([a])):o>-1&&e.$set(t,"value",n.slice(0,o).concat(n.slice(o+1)))}else e.$set(t,"value",i)}}}):"radio"===(t.type||"text")?r("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"v.value"}],staticClass:"form-control",attrs:{placeholder:"text"==t.type?"String":"Number",type:"radio"},domProps:{checked:e._q(t.value,null)},on:{change:function(r){return e.$set(t,"value",null)}}}):r("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"v.value"}],staticClass:"form-control",attrs:{placeholder:"text"==t.type?"String":"Number",type:t.type||"text"},domProps:{value:t.value},on:{input:function(r){r.target.composing||e.$set(t,"value",r.target.value)}}}),r("div",{staticClass:"input-group-append pl-2"},[r("div",{staticClass:"form-check form-check-inline small text-primary"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.type,expression:"v.type"}],attrs:{name:t.text+"_vname",type:"radio",id:t.text+"_num",value:"number"},domProps:{checked:e._q(t.type,"number")},on:{change:function(r){return e.$set(t,"type","number")}}}),r("label",{staticClass:"form-check-label pl-1",attrs:{for:t.text+"_num"}},[e._v("Number")])]),r("div",{staticClass:"form-check form-check-inline small text-primary"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.type,expression:"v.type"}],attrs:{name:t.text+"_vname",type:"radio",id:t.text+"_text",value:"text"},domProps:{checked:e._q(t.type,"text")},on:{change:function(r){return e.$set(t,"type","text")}}}),r("label",{staticClass:"form-check-label pl-1",attrs:{for:t.text+"_text"}},[e._v("Text")])])])])}))],2),r("div",{staticClass:"flex-grow-1 position-relative border rounded border-secondary overflow-auto",staticStyle:{"min-height":"50%","padding-top":"10px"}},[e.runResult.errors.length?r("div",{staticClass:"w-100 h-100"},e._l(e.runResult.errors,(function(t,n){return r("div",{key:n,staticClass:"alert alert-danger m-1 w-100"},[e._v(e._s(t.text))])})),0):r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.runResult.result,expression:"runResult.result"}],staticClass:"w-100",staticStyle:{resize:"none",height:"calc(100% - 7px) !important",border:"none",margin:"0",padding:"10px"},style:e.textDirection?"direction:rtl":"",attrs:{disabled:"disabled"},domProps:{value:e.runResult.result},on:{input:function(t){t.target.composing||e.$set(e.runResult,"result",t.target.value)}}}),r("div",{staticClass:"custom-control custom-switch actions position-absolute",staticStyle:{top:"-2px",right:"21px"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.textDirection,expression:"textDirection"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"customSwitch2"},domProps:{checked:Array.isArray(e.textDirection)?e._i(e.textDirection,null)>-1:e.textDirection},on:{change:function(t){var r=e.textDirection,n=t.target,s=!!n.checked;if(Array.isArray(r)){var i=null,a=e._i(r,i);n.checked?a<0&&(e.textDirection=r.concat([i])):a>-1&&(e.textDirection=r.slice(0,a).concat(r.slice(a+1)))}else e.textDirection=s}}}),r("label",{staticClass:"custom-control-label clickable",attrs:{for:"customSwitch2"}},[e._v("RTL")])])])]):e._e(),e.selectedtemp&&(e.temps[e.selectedtemp].errors||[]).length?r("div",{staticClass:"position-absolute w-100 d-flex flex-wrap errorbox border border-secondary bg-light",class:{visible:e.showerror}},[r("div",{staticClass:"btn btn-danger position-absolute toggler",on:{click:function(t){e.showerror=!e.showerror}}},[e._v("errors")]),e._l(e.temps[e.selectedtemp].errors,(function(t,n){return r("div",{key:n,staticClass:"alert alert-danger m-1",on:{click:function(r){return e.gotoerror(t)}}},[e._v(e._s(t.error))])}))],2):e._e()])},j=[],T=r("bfb1"),A=T["a"],M=(r("613a"),Object(x["a"])(A,k,j,!1,null,null,null)),S=M.exports,L=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"d-flex bg-light pt-3 p-2 overflow-auto flex-column"},[r("div",{staticClass:"clearfix"},[r("div",{staticClass:"btn btn-success float-right",class:{disabled:!e.template||!e.language||!e.email},on:{click:function(t){return e.sendRequest()}}},[e._v("Send Notification")])]),r("div",{staticClass:"emails rounded border border-secondary position-relative p-2 pt-4 m-1 mb-5",staticStyle:{width:"calc(100% - 0.5rem)"}},[r("h4",{staticClass:"position-absolute bg-light px-2 text-primary",staticStyle:{top:"-15px",left:"10px"}},[e._v("Template")]),r("div",{staticClass:"input-group mb-1"},[e._m(0),r("select",{directives:[{name:"model",rawName:"v-model",value:e.template,expression:"template"}],staticClass:"custom-select",attrs:{id:"inputGroupSelect01"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.template=t.target.multiple?r:r[0]}}},e._l(e.templates,(function(t,n){return r("option",{key:n,domProps:{value:n}},[e._v(e._s(n))])})),0)]),r("div",{staticClass:"input-group mb-1"},[e._m(1),r("select",{directives:[{name:"model",rawName:"v-model",value:e.language,expression:"language"}],staticClass:"custom-select",attrs:{id:"inputGroupSelect02"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.language=t.target.multiple?r:r[0]}}},e._l(e.languages,(function(t,n){return r("option",{key:n,domProps:{value:n}},[e._v(e._s(n))])})),0)])]),r("div",{staticClass:"emails rounded border border-secondary position-relative p-2 pt-4 m-1 mb-5",staticStyle:{width:"calc(100% - 0.5rem)"}},[r("h4",{staticClass:"position-absolute bg-light px-2 text-primary",staticStyle:{top:"-15px",left:"10px"}},[e._v("Email")]),r("div",{staticClass:"input-group mb-3 w-100 d-flex"},[e._m(2),r("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"flex-grow-1",attrs:{type:"text",placeholder:"can be camma seperated list also","aria-describedby":"basic-addon1"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),r("div",{staticClass:"input-group mb-3 w-100 d-flex"},[e._m(3),r("input",{directives:[{name:"model",rawName:"v-model",value:e.emailsubject,expression:"emailsubject"}],staticClass:"flex-grow-1",attrs:{type:"text",placeholder:"subject of email to send","aria-describedby":"basic-addon1"},domProps:{value:e.emailsubject},on:{input:function(t){t.target.composing||(e.emailsubject=t.target.value)}}})])]),r("div",{staticClass:"variables rounded border border-secondary position-relative p-2 pt-4 m-1 mb-5",staticStyle:{width:"calc(100% - 0.5rem)"}},[r("h4",{staticClass:"position-absolute bg-light px-2 text-primary",staticStyle:{top:"-15px",left:"10px"}},[e._v("VARIABLES")]),r("div",{staticClass:"variables"},[e.variables?r("div",[e.variables.length?r("div",e._l(e.variables,(function(t,n){return r("div",{key:n,staticClass:"input-group var m-1 border px-1 rounded text-light position-relative"},[r("div",{staticClass:"input-group-prepend"},[r("span",{staticClass:"input-group-text",attrs:{id:"basic-addon1"}},[e._v(e._s(t.text))])]),"checkbox"===(t.type||"text")?r("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"v.value"}],staticClass:"form-control",attrs:{placeholder:"text"==t.type?"String":"Number",type:"checkbox"},domProps:{checked:Array.isArray(t.value)?e._i(t.value,null)>-1:t.value},on:{change:function(r){var n=t.value,s=r.target,i=!!s.checked;if(Array.isArray(n)){var a=null,o=e._i(n,a);s.checked?o<0&&e.$set(t,"value",n.concat([a])):o>-1&&e.$set(t,"value",n.slice(0,o).concat(n.slice(o+1)))}else e.$set(t,"value",i)}}}):"radio"===(t.type||"text")?r("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"v.value"}],staticClass:"form-control",attrs:{placeholder:"text"==t.type?"String":"Number",type:"radio"},domProps:{checked:e._q(t.value,null)},on:{change:function(r){return e.$set(t,"value",null)}}}):r("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"v.value"}],staticClass:"form-control",attrs:{placeholder:"text"==t.type?"String":"Number",type:t.type||"text"},domProps:{value:t.value},on:{input:function(r){r.target.composing||e.$set(t,"value",r.target.value)}}}),r("div",{staticClass:"input-group-append pl-2"},[r("div",{staticClass:"form-check form-check-inline small text-primary"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.type,expression:"v.type"}],attrs:{name:t.text+"_vname",type:"radio",id:t.text+"_num",value:"number"},domProps:{checked:e._q(t.type,"number")},on:{change:function(r){return e.$set(t,"type","number")}}}),r("label",{staticClass:"form-check-label pl-1",attrs:{for:t.text+"_num"}},[e._v("Number")])]),r("div",{staticClass:"form-check form-check-inline small text-primary"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.type,expression:"v.type"}],attrs:{name:t.text+"_vname",type:"radio",id:t.text+"_text",value:"text"},domProps:{checked:e._q(t.type,"text")},on:{change:function(r){return e.$set(t,"type","text")}}}),r("label",{staticClass:"form-check-label pl-1",attrs:{for:t.text+"_text"}},[e._v("Text")])])])])})),0):r("div",{staticClass:"alert alert-success w-100"},[e._v("this templates needs no variable")])]):r("div",{staticClass:"alert alert-warning w-100"},[e._v("No Templates Selected")])])])])},N=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"input-group-prepend"},[r("label",{staticClass:"input-group-text",attrs:{for:"inputGroupSelect01"}},[e._v("Template Name")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"input-group-prepend"},[r("label",{staticClass:"input-group-text",attrs:{for:"inputGroupSelect02"}},[e._v("Template Language")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"input-group-prepend"},[r("span",{staticClass:"input-group-text",attrs:{id:"basic-addon1"}},[e._v("Email Addresses")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"input-group-prepend"},[r("span",{staticClass:"input-group-text",attrs:{id:"basic-addon1"}},[e._v("Email Subject")])])}],R=(r("8e6e"),r("ac6a"),r("456d"),r("ade3"));r("28a5"),r("6762"),r("2fdb"),r("14b9"),r("a481");function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach((function(t){Object(R["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var $={data:function(){return{languages:{},template:null,language:null,email:"",emailsubject:"",variables:null}},created:function(){},methods:{getvariables:function(e){var t=/%%\w+/g,r=t.exec(e),n=[],s=[];while(null!=r){var i=n.find((function(e){return e.text==r[0].replace("%%","")}));i?i.index.push(r.index):n.push({text:r[0].replace("%%",""),var:r[0],index:[r.index],type:"text",value:""}),r=t.exec(e)}t=/\{\{(.*?)\}\}/g;var a=/[a-zA-Z]\w*/g,o=/\.|`/g;r=t.exec(e);var l=function(){var i=[],l=r[1].replace(/".*?"/g,(function(e){return i.push(e),"%%"+"-".repeat(e.length-2)})).replace(/'.*?'/g,(function(e){return i.push(e),"%%"+"-".repeat(e.length-2)})),c=o.exec(l);while(c)s.push({index:r.index+c.index+2,text:c[0],error:'unsupported charecter in template expression "'+c[0]+'"'}),c=o.exec(l);var u=a.exec(l);while(null!=u){if("("==l.slice(u.index+u[0].length,u.index+u[0].length+1))["rounddown","roundup","round","number","gettemp"].includes(u[0])||s.push({index:r.index+u.index+2,text:u[0],error:'"'+u[0]+'()" function can not be used!!!'});else{var _=n.find((function(e){return e.text==u[0]}));_?_.index.push(r.index+u.index+2):n.push({text:u[0],var:u[0],index:[r.index+u.index+2],type:"text",value:""})}u=a.exec(l)}r=t.exec(e)};while(r)l();return{variables:n,errors:s}},sendRequest:function(){var e=this;if(this.template&&this.language&&this.email){var t={templateID:this.template,templateLang:this.language,emails:this.email.split(","),EMAIL_SUBJECT:this.emailsubject,VALUES:this.variables.reduce((function(e,t){return U(U({},e),{},Object(R["a"])({},t.text,t.value))}),{})};this.fetch("/api/email",{method:"post",headers:{"Content-Type":"application/json"},mode:"cors",body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(t){t.error?e.$swal({type:"error",title:"Error in request",text:"couln't send request of notification to DNS server"}):e.$swal({type:"success",title:"request sent",text:"request of notification was sent successfully to dns , for result refer to log page"})})).catch((function(){e.$swal({type:"error",title:"Error in request",text:"couln't send request of notification to DNS server"})}))}}},computed:{templates:function(){return this.$root.cache}},watch:{template:function(e){this.language=null,this.languages=this.templates[e]},language:function(e){e||(this.variables=null);var t=this.getvariables(this.templates[this.template][this.language]);if(t.errors.length)return this.variables=null,this.$swal({icon:"error",title:"Error!!!",text:"templates has errors, please resolve them first"});this.variables=t.variables},variables:{deep:!0,handler:function(){}}}},I=$,K=Object(x["a"])(I,L,N,!1,null,null,null),W=K.exports,q=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"d-block overflow-auto bg-light d-flex p-3 flex-column "},[e.$root.logList.length?e._e():r("div",{staticClass:"alert alert-warning m-1 w-100"},[e._v("Still no action received")]),e._l(e.$root.logList,(function(t,n){return r("div",{key:n,class:"mb-3 alert alert-"+t.msgtype},[r("div",{staticClass:"text-left"},[r("strong",[e._v("\n        timestamp:\n      ")]),e._v("\n      "+e._s((t.msgdata||{}).timeStamp)+"\n      "),r("br"),r("strong",[e._v("\n        message:\n      ")]),e._v("\n      "+e._s((t.msgdata||{}).text)+"\n    ")]),t.msgdata.data?r("div",[e._v(e._s(t.msgdata.data))]):e._e()])}))],2)},V=[],G={},z=G,J=Object(x["a"])(z,q,V,!1,null,null,null),Z=J.exports,H=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"bg-light p-2 d-flex flex-column"},[r("h3",{staticClass:"text-center w-100"},[e._v("Desctiption on how DNS (Dynamic notification system) works")]),r("textarea",{staticClass:"flex-grow-1 w-100",staticStyle:{resize:"none"},attrs:{disabled:"disabled"},domProps:{value:e.value}})])},F=[],X={data:function(){return{value:'\n      Basicly this app/component is responsible for generating notifications\n      based on templates and variables\n\n\n      for generating the template for there is two way available \n      1: using %%<VARIABLE_NAME>; \n          this method is self explanatory just use the variable name whereever \n          in the template (or even in the expression clause)\n\n      2: using {{<EXPRESSION>}}\n        this is where the magic happens \n        you can use logical (javascript) expression to create value inside template with \n        following operators:\n          <CONDITION>?<TRUE_VALUE>:<FALSE_VALUE>  => condition to apply value\n          &&  => AND\n          || =>; OR\n          + => pluse (for Number values) or concate (for string values)\n          - => minus (for Number values)\n          / => devide (for Number values)\n          % => mod (for Number values)\n        and following functions:\n          round(<AMOUNT>) => rounding number to near integer\n          rounddown(<AMOUNT>) => round number to previous integer\n          roundup(<AMOUNT>) => round number to next integer\n          number(<AMOUNT>)  => converts string value to number value (for using with operators)\n          gettemp(<TEMPLATE_NAME>,<TEMPLATE_LANGUAGE>,<VALUES>)\n            template name and language are string values of saved templates \n            values is an json object containing variables to use refering templates \n            if no values is provided current values will be used in target template\n\n        Examples:\n          Values for this templates are for example like following:\n          {\n            "string": "",\n            "string1": "string1",\n            "string2": "string2",\n            ...\n            "number" : 0,\n            "number1" : 1,\n            "number2" : 2,\n            ...\n          }\n          \n        we can create some expression like this:\n        {{string1 ? string2: string1}} // will result in "string1" value\n        {{number2 - number1 - 1 && string2}} // will result in "0" value\n        {{round(1.448*100)/100}}   // will result in "1.45" value \n\n        {{string? gettemp("temp1","en") : gettemp("temp2","fa",{"a":1,"b":"str"})}}\n          will result in loading template with name temp2 and language fa with the values provided \n\n      \n      for further information and complex situation you can contact me at\n\n      babak.za@mtnirancell.ir\n      babak.zarrinbal@dzetco.com\n      babak.zarrinbal@gmail.com\n      \n      '}}},Y=X,Q=Object(x["a"])(Y,H,F,!1,null,null,null),ee=Q.exports;p["a"].use(P["a"]);var te=new P["a"]({routes:[{path:"/",name:"templates",component:S,meta:{keepAlive:!0}},{path:"/notification",name:"notification",component:W,meta:{keepAlive:!0}},{path:"/logs",name:"logs",component:Z,meta:{keepAlive:!0}},{path:"/help",name:"help",component:ee,meta:{keepAlive:!0}}]}),re=te;r("1449"),p["a"].use(d["a"]),p["a"].mixin({data:function(){return{socket:a,fetch:_}}}),p["a"].config.productionTip=!0,new p["a"]({router:re,data:function(){return{logList:[],cache:[]}},render:function(e){return e(O)}}).$mount("#app")},"613a":function(e,t,r){"use strict";var n=r("c7a1"),s=r.n(n);s.a},"87b8":function(e,t,r){},9180:function(e,t,r){},a389:function(e,t,r){"use strict";var n=r("2938"),s=r.n(n);s.a},bfb1:function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es7_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("8e6e"),core_js_modules_es7_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es7_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es6_object_keys__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("456d"),core_js_modules_es6_object_keys__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es6_object_keys__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es6_number_constructor__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("c5f6"),core_js_modules_es6_number_constructor__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es6_number_constructor__WEBPACK_IMPORTED_MODULE_2__),D_Projects_01_TT_Projects_DCBS_DNS_digitalNotification_front_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("ade3"),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("ac6a"),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es6_array_sort__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("55dd"),core_js_modules_es6_array_sort__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es6_array_sort__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es7_array_includes__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("6762"),core_js_modules_es7_array_includes__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es7_array_includes__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es6_string_includes__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("2fdb"),core_js_modules_es6_string_includes__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es6_string_includes__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es6_string_repeat__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("14b9"),core_js_modules_es6_string_repeat__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es6_string_repeat__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("a481"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_es6_array_find__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("7514"),core_js_modules_es6_array_find__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_es6_array_find__WEBPACK_IMPORTED_MODULE_10__),D_Projects_01_TT_Projects_DCBS_DNS_digitalNotification_front_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("2909"),regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("96cf"),regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_12__),D_Projects_01_TT_Projects_DCBS_DNS_digitalNotification_front_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("1da1");function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){Object(D_Projects_01_TT_Projects_DCBS_DNS_digitalNotification_front_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3__["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}__webpack_exports__["a"]={data:function(){return{mode:"edit",temps:[],selectedtemp:null,statingtemp:"",currtmp:"",checktimeout:null,textDirection:!1,showerror:!1,runResult:{errors:[],result:""}}},created:function(){this.mergecache(this.$root.cache)},computed:{},methods:{selectTemp:function(){var e=Object(D_Projects_01_TT_Projects_DCBS_DNS_digitalNotification_front_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_13__["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.selectedtemp=t,this.currtmp=this.temps[t].value,e.next=4,this.getvariables(this.temps[t].value);case 4:r=e.sent,this.temps[t].variables=r.variables,this.temps[t].errors=r.errors,this.runResult={errors:[],result:""};case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),tempChange:function(e){var t=this;this.checktimeout&&window.clearTimeout(this.checktimeout),this.checktimeout=window.setTimeout((function(){t.getvariables(t.currtmp).then((function(t){return e.variables=t.variables,e.errors=t.errors})),t.checktimeout=null}),300)},edit:function(){this.temps[this.selectedtemp].editable=!0,this.statingtemp=this.currtmp},cancelEdit:function(){this.currtmp=this.temps[this.selectedtemp].value,this.temps[this.selectedtemp].errors=[],this.temps[this.selectedtemp].editable=!1},saveEdit:function(){var e=this;try{var t,r=this.runtempLocally(this.currtmp),n=r.errors;n&&(t=this.temps[this.selectedtemp].errors).push.apply(t,Object(D_Projects_01_TT_Projects_DCBS_DNS_digitalNotification_front_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_11__["a"])(n))}catch(s){console.log("-----------",s)}return this.temps[this.selectedtemp].errors.length?(this.showerror=!0,this.$swal({icon:"error",title:"Error!!!",text:"templates has errors, please resolve them first"})):this.statingtemp!=this.temps[this.selectedtemp].value?this.$swal({icon:"error",title:"Error!!!",text:"template changed while you were editing... please cancel and edit agian"}):void this.fetch("/api/template",{method:"post",headers:{"Content-Type":"application/json"},mode:"cors",body:JSON.stringify({TEMPLATE_V:this.currtmp,TEMPLATE_ID_N:this.temps[this.selectedtemp].tid,LANGUAGE_ID_N:this.temps[this.selectedtemp].tlang})}).then((function(e){return e.json()})).then((function(t){t.error?e.$swal({icon:"error",title:"Error!!!",text:"Update/Create encounterd problems"}):(e.temps[e.selectedtemp].editable=!1,e.temps[e.selectedtemp].value=e.currtmp,e.$swal({icon:"success",title:"Update/Create successfull "}))})).catch((function(){return e.$swal({icon:"error",title:"Error!!!",text:"Update/Create encounterd problems"})}))},getvariables:function(){var e=Object(D_Projects_01_TT_Projects_DCBS_DNS_digitalNotification_front_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_13__["a"])(regeneratorRuntime.mark((function e(t){var r,n,s,i,a,o,l,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=/%%\w+/g,n=r.exec(t),s=[],i=[];while(null!=n)a=s.find((function(e){return e.text==n[0].replace("%%","")})),a?a.index.push(n.index):s.push({text:n[0].replace("%%",""),var:n[0],index:[n.index],type:"text",value:""}),n=r.exec(t);r=/\{\{(.*?)\}\}/g,o=/[a-zA-Z]\w*/g,l=/\.|`/g,n=r.exec(t),c=function(){var e=[],a=n[1].replace(/".*?"/g,(function(t){return e.push(t),"%%"+"-".repeat(t.length-2)})).replace(/'.*?'/g,(function(t){return e.push(t),"%%"+"-".repeat(t.length-2)})),c=l.exec(a);while(c)i.push({index:n.index+c.index+2,text:c[0],error:'unsupported charecter in template expression "'+c[0]+'"'}),c=l.exec(a);var u=o.exec(a);while(null!=u){if("("==a.slice(u.index+u[0].length,u.index+u[0].length+1))["rounddown","roundup","round","number","gettemp"].includes(u[0])||i.push({index:n.index+u.index+2,text:u[0],error:'"'+u[0]+'()" function can not be used!!!'});else{var _=s.find((function(e){return e.text==u[0]}));_?_.index.push(n.index+u.index+2):s.push({text:u[0],var:u[0],index:[n.index+u.index+2],type:"text",value:""})}u=o.exec(a)}n=r.exec(t)};while(n)c();return e.abrupt("return",{variables:s,errors:i});case 12:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),gotovar:function(e){var t=this,r=e.index.find((function(e){return e>t.$refs.textarea.selectionEnd}))||e.index[0];this.$refs.textarea.focus(),this.$refs.textarea.setSelectionRange(r,r+e.var.length)},gotoerror:function(e){this.$refs.textarea.focus(),this.$refs.textarea.setSelectionRange(e.index,e.index+e.text.length)},mergecache:function(e){var t=this,r=function(r){var n=function(n){var s=t.temps.find((function(e){return e.tid==r&&e.tlang==n}));s?s.value=e[r][n]:t.temps.push({tid:r,tlang:n,value:e[r][n],editable:!1,variables:[],errors:[]})};for(var s in e[r])n(s)};for(var n in e)r(n);this.temps.sort((function(e,t){return e.tid+":"+e.tlang>t.tid+":"+t.tlang?1:-1})),this.temps.length&&null===this.selectedtemp&&(this.selectedtemp=0)},createTemp:function(){var e=Object(D_Projects_01_TT_Projects_DCBS_DNS_digitalNotification_front_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_13__["a"])(regeneratorRuntime.mark((function e(){var t,r,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$swal.fire({input:"text",inputPlaceholder:"Enter Template Name ID",showCancelButton:!0,inputAttributes:{maxlength:11}});case 2:if(t=e.sent,r=t.value,r){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,this.$swal.fire({input:"text",inputPlaceholder:"Enter Template Language ID",showCancelButton:!0,inputAttributes:{maxlength:2}});case 8:if(n=e.sent,s=n.value,s){e.next=12;break}return e.abrupt("return");case 12:if(!this.temps.find((function(e){return e.tid==r&&e.tlang==s}))){e.next=14;break}return e.abrupt("return",this.$swal({icon:"error",title:"Duplicate template!!!",text:"This template exist already "+r+":"+s}));case 14:this.temps.push({tid:r,tlang:s,value:"",editable:!0,variables:[],unsavedtemp:!0}),this.selectTemp(this.temps.length-1);case 16:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),deleteTemp:function(){var e=Object(D_Projects_01_TT_Projects_DCBS_DNS_digitalNotification_front_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_13__["a"])(regeneratorRuntime.mark((function e(){var t,r,n,s,i,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$swal({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"delete!"});case 2:if(t=e.sent,r=t.value,r){e.next=6;break}return e.abrupt("return");case 6:if(n=this.temps[this.selectedtemp],!n.unsavedtemp){e.next=14;break}return this.$swal({icon:"success",title:"Deleted successfully "}),s=n.tid,i=n.tlang,this.selectedtemp=null,this.temps=this.temps.filter((function(e){return e.tid!=s&&e.tlang!=i})),e.abrupt("return");case 14:this.fetch("/api/template/".concat(n.tid,"/").concat(n.tlang),{method:"delete"}).then((function(e){return e.json()})).then((function(e){if(e.error)return a.$swal({icon:"error",title:"Error!!!",text:"Couldn't delete this template"});a.$swal({icon:"success",title:"Deleted successfully "});var t=n.tid,r=n.tlang;a.selectedtemp=null,a.temps=a.temps.filter((function(e){return e.tid!=t&&e.tlang!=r}))})).catch((function(){return a.$swal({icon:"error",title:"Error!!!",text:"Couldn't delete this template"})}));case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),showerrors:function(e){var t=this;Array.isArray(e)||(e=[e]),(this.curerrors||[]).forEach((function(e){return e.close()})),this.curerrors=e.map((function(e){return t.$swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:0,timerProgressBar:!0,icon:"error",title:e.error,onOpen:function(r){r.addEventListener("mouseenter",t.$swal.stopTimer),r.addEventListener("mouseleave",t.$swal.resumeTimer),r.addEventListener("click",(function(){t.$refs.textarea.focus(),t.$refs.textarea.setSelectionRange(e.index,e.index+e.text.length)}))}}).fire()}))},runTemp:function(){var e=this,t=this.temps[this.selectedtemp].tid,r=this.temps[this.selectedtemp].tlang,n=this.temps[this.selectedtemp].variables.reduce((function(e,t){return _objectSpread(_objectSpread({},e),{},Object(D_Projects_01_TT_Projects_DCBS_DNS_digitalNotification_front_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3__["a"])({},t.text,void 0===t.value?"":t.value))}),{});this.fetch("/api/template-process",{method:"post",headers:{"Content-Type":"application/json"},mode:"cors",body:JSON.stringify({templateID:t,templateLang:r,values:n})}).then((function(e){return e.json()})).then((function(s){if(s.localcheck){var i=e.temps[e.selectedtemp].value;if(void 0===i)return e.runResult={errors:[{index:0,text:"",error:"couldn't find template ".concat(t," with Language ").concat(r)}],result:""};e.runResult=e.runtempLocally(i,n)}else e.runResult=s})).catch((function(){return e.runResult={errors:[],result:""}}))},runtempLocally:function runtempLocally(str){var _this8=this,VALUES=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},errors=[],resultstr="";str=str.replace(/%%\w+/g,(function(e){var t=VALUES[e.replace("%%","")];return t||(0===t?t:"")}));var number=Number,round=Math.round,rounddown=Math.floor,roundup=Math.ceil,gettemp=function(e,t,r){var n=(_this8.temps.find((function(r){return r.tid==e&&r.tlang==t}))||{}).value;if(void 0===n)return errors.push({index:0,text:"",error:"couldn't find template ".concat(e," with Language ").concat(t)}),"";var s=_this8.runtempLocally(n,r||VALUES),i=s.result,a=s.ers;return errors.push.apply(errors,Object(D_Projects_01_TT_Projects_DCBS_DNS_digitalNotification_front_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_11__["a"])(a)),i};resultstr=str;var r=/\{\{(.*?)\}\}/g,getvar=/[a-zA-Z]\w*/g,c=r.exec(str),_loop4=function _loop4(){var exp="",index=0,strings=[],expre=c[1].replace(/".*?"/g,(function(e){return strings.push(e),"%%"+"-".repeat(e.length-2)})).replace(/'.*?'/g,(function(e){return strings.push(e),"%%"+"-".repeat(e.length-2)})),v=getvar.exec(expre);while(v)"("!=c[1].slice(v.index+v[0].length,v.index+v[0].length+1)&&(exp+=c[1].slice(index,v.index)+"VALUES."+v[0],index=v.index+v[0].length),v=getvar.exec(expre);exp+=c[1].slice(index,c[1].length);var result="";try{result=eval(exp)}catch(error){errors.push({error:"Couln'nt process ".concat(c[0]," with values ").concat(JSON.stringify(VALUES)),index:c.index,text:c[0]})}resultstr=resultstr.replace(c[0],result),c=r.exec(str)};while(c)_loop4();return{result:resultstr,errors:errors}}},watch:{temps:{deep:!0,handler:function(){}},"$root.cache":{handler:function(e){return this.mergecache(e)}}}}},c6d3:function(e,t,r){"use strict";var n=r("fa5f"),s=r.n(n);s.a},c7a1:function(e,t,r){},fa5f:function(e,t,r){}});
//# sourceMappingURL=app.697f1355.js.map